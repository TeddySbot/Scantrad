<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Panneau Admin</title>
  <link rel="stylesheet" href="/styles.css">
  <script defer src="/js/admin.js"></script> <!-- ✅ script externe -->
</head>
<body>
        <%- include('components/header') %>

        <h1>Panneau d'administration</h1>
        <table border="1" cellpadding="10">
            <thead>
            <tr>
                <th>Nom d'utilisateur</th>
                <th>Email</th>
                <th>Rôle</th>
                <th>Date d'inscription</th>
            </tr>
            </thead>
            <tbody>
            <% users.forEach(user => { %>
                <tr>
                <td><%= user.username %></td>
                <td><%= user.email %></td>
                <td>
                    <select data-user-id="<%= user._id %>">
                    <option value="user" <%= user.role === 'user' ? 'selected' : '' %>>User</option>
                    <option value="writer" <%= user.role === 'writer' ? 'selected' : '' %>>Writer</option>
                    <option value="admin" <%= user.role === 'admin' ? 'selected' : '' %>>Admin</option>
                    </select>
                </td>
                <td><%= user.createdAt.toLocaleDateString() %></td>
                </tr>
            <% }) %>
            </tbody>
        </table>

        <%- include('components/footer') %>


</body>
</html>
